package MoleServer;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Collections;

import DB.DBConnection;
import io.netty.channel.ChannelHandlerContext;

public class SignUpServer {
	private ArrayList<String> idList = new ArrayList<String>();
	public SignUpServer(String id, ChannelHandlerContext ctx) {
		try {
			Connection con = DBConnection.makeConnection(); // DB연결
			PreparedStatement pstmt = con.prepareStatement("SELECT * FROM gamer");
			ResultSet rs = pstmt.executeQuery();;
			while (rs.next()) { // 데이터베이스 테이블 내용 돌림 확인
				idList.add(rs.getString("id"));
			}
			int index = Collections.binarySearch(idList, id);
            if(index >= 0 )
                ctx.writeAndFlush(""); //아이디중복

            else {
                ctx.writeAndFlush(""); //아이디 중복아님(생성가능)
            }

			rs.close();
			pstmt.close();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}
